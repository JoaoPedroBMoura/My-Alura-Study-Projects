<canvas width = "600" height = "600"></canvas>
<script>
 
function createSquare(x,y,sizeSquare,color){
  brush.fillStyle = color; 
  brush.fillRect(x,y,sizeSquare,sizeSquare)
  brush.fill();
 }

function createPalette(){  
 createSquare(xRed,ySquare,sizeSquare,"red")
 createSquare(xGreen,ySquare,sizeSquare,"green")
 createSquare(xBlue,ySquare,sizeSquare,"blue")
}

 function createCircle(x,y,currentColor){
  brush.fillStyle= currentColor
  brush.beginPath()
  brush.arc(x,y,5,0,2*3.14)
  brush.fill()
 }

 function limitOfPallete(x,y){                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
   if(x >= 0 && x < sizeSquare && y >= 0 && y < (sizeSquare * 3)+5                      ) {
     return false
   }else{
    return true
    }
 }

 function   manegeMouse(event){

  var x = event.pageX - scren.offsetLeft;
  var y = event.pageY - scren.offsetTop;
 
  if(draw && limitOfPallete(x,y)){
    createCircle(x,y,currentColor)
  }
 }

 function enableDraw(){
  draw =  true
 }
 
 function desableenableDraw(){                                                                                                                                                                                                                     
  draw = false
 }

 function changeColor(event){
  var x = event.pageX - scren.offsetLeft;
  var y = event.pageY - scren.offsetTop;

  if(y>=0 && y < ySquare + sizeSquare){
    if (x>=0 && x < xRed + sizeSquare){
     currentColor = "red"
    }else if(x>=0 && x < xGreen + sizeSquare ){
     currentColor = "green"
    }else if (x>=0 && x < xBlue + sizeSquare){
     currentColor = "blue"
    }
  }             
}              


var scren = document.querySelector("canvas")
var brush = scren.getContext("2d")
 
 var currentColor = "blue"
 var xRed = 0
 var xGreen = 50
 var xBlue = 100 
 
  var ySquare = 0
  var sizeSquare = 50

  var draw = false

 brush.fillStyle = "grey"
 brush.fillRect(0,0,600,600)

 createPalette()

 scren.onmousemove = manegeMouse;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           usemove = manegeMouse;
 scren.onmousedown = enableDraw
 scren.onmouseup=desableenableDraw;
 scren.onclick = changeColor;
</script>